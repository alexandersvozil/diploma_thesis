% Copyright (C) 2014-2015 by Thomas Auzinger <thomas@auzinger.name>

\documentclass[draft,final]{vutinfth} % Remove option 'final' to obtain debug information.

% Load packages to allow in- and output of non-ASCII characters.
\usepackage{lmodern}        % Use an extension of the original Computer Modern font to minimize the use of bitmapped letters.
\usepackage[T1]{fontenc}    % Determines font encoding of the output. Font packages have to be included before this line.
\usepackage[utf8]{inputenc} % Determines encoding of the input. All input files have to use UTF8 encoding.

% Extended LaTeX functionality is enables by including packages with \usepackage{...}.
\usepackage{listings}
\usepackage{fixltx2e}   % Provides fixes for several errors in LaTeX2e.
\usepackage{stmaryrd}
\usepackage{amsmath}    % Extended typesetting of mathematical expression.
\usepackage{amsthm}
\usepackage{amssymb}    % Provides a multitude of mathematical symbols.
\usepackage{mathtools}  % Further extensions of mathematical typesetting.
\usepackage{microtype}  % Small-scale typographic enhancements.
\usepackage{enumitem}   % User control over the layout of lists (itemize, enumerate, description).
\usepackage{multirow}   % Allows table elements to span several rows.
\usepackage{booktabs}   % Improves the typesettings of tables.
\usepackage{subcaption} % Allows the use of subfigures and enables their referencing.
\usepackage[ruled,linesnumbered,algochapter]{algorithm2e} % Enables the writing of pseudo code.
\usepackage[usenames,dvipsnames,table]{xcolor} % Allows the definition and use of colors. This package has to be included before tikz.
\usepackage{nag}       % Issues warnings when best practices in writing LaTeX documents are violated.
\usepackage{hyperref}  % Enables cross linking in the electronic document version. This package has to be included second to last.
\usepackage[acronym,toc]{glossaries} % Enables the generation of glossaries and lists fo acronyms. This package has to be included last.
\usepackage{tikz}

% Define convenience functions to use the author name and the thesis title in the PDF document properties.
\newcommand{\authorname}{Alexander Svozil} % The author name without titles.
\newcommand{\thesistitle}{Complexity of SPARQL} % The title of the thesis. The English version should be used, if it exists.

% Set PDF document properties
\hypersetup{
    pdfpagelayout   = TwoPageRight,           % How the document is shown in PDF viewers (optional).
    linkbordercolor = {Melon},                % The color of the borders of boxes around crosslinks (optional).
    pdfauthor       = {\authorname},          % The author's name in the document properties (optional).
    pdftitle        = {\thesistitle},         % The document's title in the document properties (optional).
    pdfsubject      = {Subject},              % The document's subject in the document properties (optional).
    pdfkeywords     = {a, list, of, keywords} % The document's keywords in the document properties (optional).
}
\lstset{
  basicstyle=\ttfamily,
  mathescape,
%  numbers=left,                   % where to put the line-numbers
  numberstyle=\footnotesize,      % the size of the fonts that are used for the
  stepnumber=1,                   % the step between two line-numbers. If it is
  numbersep=10pt,                  % how far the line-numbers are from the code
  escapeinside={(*@}{@*)},
 %numbers=left,               % Ort der Zeilennummern
  %numberstyle=\tiny,          % Stil der Zeilennummern
         %stepnumber=2,               % Abstand zwischen den Zeilennummern
     %    numbersep=5pt,              % Abstand der Nummern zum Text
    %     tabsize=2,                  % Groesse von Tabs
    %     extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
    %     keywordstyle=\color{red},
    %        frame=b,         
 %        keywordstyle=[1]\textbf,    % Stil der Keywords
 %        keywordstyle=[2]\textbf,    %
 %        keywordstyle=[3]\textbf,    %
 %        keywordstyle=[4]\textbf,   \sqrt{\sqrt{}} %
    %     stringstyle=\color{white}\ttfamily, % Farbe der String
    %     showspaces=false,           % Leerzeichen anzeigen ?
    %     showtabs=false,             % Tabs anzeigen ?
		 %         xleftmargin=17pt,
         %framexleftmargin=17pt,
         %framexrightmargin=5pt,
         %framexbottommargin=4pt
         %backgroundcolor=\color{lightgray},
    %     showstringspaces=false      % Leerzeichen in Strings anzeigen ?        
}

\setsecnumdepth{subsection} % Enumerate subsections.

\nonzeroparskip             % Create space between paragraphs (optional).
\setlength{\parindent}{0pt} % Remove paragraph identation (optional).

\makeindex      % Use an optional index.
\makeglossaries % Use an optional glossary.
%\glstocfalse   % Remove the glossaries from the table of contents.

% Set persons with 4 arguments:
%  {title before name}{name}{title after name}{gender}
%  where both titles are optional (i.e. can be given as empty brackets {}).
\setauthor{}{\authorname}{Bsc.}{male}
\setadvisor{Univ.Prof. Mag.rer.nat. Dr.techn.}{Reinhard Pichler}{}{male}

% For bachelor and master theses:
%\setfirstassistant{Professor Dr.}{Reinhard Pichler}{}{male}
\setfirstassistant{Univ.Ass. Dipl.-Ing. Dr.techn.}{Sebastian Skritek}{}{male}
\setsecondassistant{Univ.Ass. Dipl.-Ing.}{Markus Kr√∂ll}{}{male}

% For dissertations:
\setfirstreviewer{Pretitle}{Forename Surname}{Posttitle}{male}
\setsecondreviewer{Pretitle}{Forename Surname}{Posttitle}{male}

% For dissertations at the PhD School:
\setsecondadvisor{Pretitle}{Forename Surname}{Posttitle}{male}

% Required data.
\setaddress{Wasnergasse 13}
\setregnumber{1026213}
\setdate{27}{4}{2016}
\settitle{\thesistitle}{Complexity of well-designed SPARQL} % Sets English and German version of the title (both can be English or German).
%\setsubtitle{Optional Subtitle of the Thesis}{Optionaler Untertitel der Arbeit} % Sets English and German version of the subtitle (both can be English or German).

% Select the thesis type: bachelor / master / doctor / phd-school.
% Bachelor:
\setthesis{master}
%
% Master:
%\setthesis{master}
\setmasterdegree{dipl.} % dipl. / rer.nat. / rer.soc.oec. / master
%
% Doctor:
%\setthesis{doctor}
%\setdoctordegree{rer.soc.oec.}% rer.nat. / techn. / rer.soc.oec.
%
% Doctor at the PhD School
%\setthesis{phd-school} % Deactivate non-English title pages (see below)

% For bachelor and master:
\setcurriculum{Computational Intelligence}{Computational Intelligence} % Sets the English and German name of the curriculum.

% For dissertations at the PhD School:
\setfirstreviewerdata{Affiliation, Country}
\setsecondreviewerdata{Affiliation, Country}

% Define convenience macros.
\newcommand{\todo}[1]{{\color{red}\textbf{TODO: {#1}}}} % Comment for the final version, to raise errors.
\newcommand{\U}{\mathbf{U}}
\renewcommand{\u}{\mathcal{U}}
\renewcommand{\l}{\mathcal{L}}
\newcommand{\s}{\mathcal{S}}
\newcommand{\V}{\mathbf{V}}
\newcommand{\OPT}{\mbox{ OPT } }
\newcommand{\UNION}{\mbox{ UNION } }
\newcommand{\GRAPH}{\mbox{ GRAPH } }
\newcommand{\SERVICE}{\mbox{ SERVICE } }
\newcommand{\AND}{\mbox{ AND }}
\newcommand{\FILTER}{\mbox{ FILTER }}
\newcommand{\SELECT}{\mbox{ SELECT }}
\newcommand{\WHERE}{\mbox{ WHERE }}
\renewcommand{\ll}{\llbracket}
\newcommand{\rr}{\rrbracket}
\newcommand{\T}{\mathcal{T}}
\newcommand{\Qo}{\llbracket Q_1 \rrbracket^{DS}_G}
\newcommand{\Qt}{\llbracket Q_2 \rrbracket^{DS}_G}
\renewcommand{\c} {\overrightarrow{c}}
\newtheorem{example}{Example}
\newtheorem{corollary}{Corollary}
\newtheorem{definition}{Definition}
\newtheorem{proposition}{Proposition}
\newtheorem{theorem}{Theorem}
\newenvironment{proofidea}{\noindent\textit{Proof Idea.}}{\hfill$\square$}
\newtheorem{lemma}{Lemma}

\begin{document}
\frontmatter % Switches to roman numbering.
% The structure of the thesis has to conform to
%  http://www.informatik.tuwien.ac.at/dekanat

\addtitlepage{naustrian} % German title page (not for dissertations at the PhD School).
\addtitlepage{english} % English title page.
\addstatementpage

\begin{acknowledgements*}
	First of all I want to thank my advisor, Prof. Dr. Reinhard Pichler not only
	for his guidance, support and patience but also for opening up this topic for me.
	I would also like to thank him for introducing me to his team at the
	database institute; in particular,  Dr. Sebastian Skritek and Dipl.-Ing. Markus Kr{\"o}ll. I would like to
	thank them all for letting me participate in their discourse and their
	valuable input. In particular I would like to thank
	Dr. Sebastian Skritek as he spent a great amount of time discussing and
	improving the proofs in the thesis with me. 

	\noindent
	Last I would like to thank my family and my friends. 
	My parents Karl and Karin for not only making my academic studies possible but
	also for encouraging me to pursue my goals. I would like to especially thank my dad 
	for always sharing a cup of coffee with me when I needed it the most. 
	I would also like to thank my friends Mihail and Chris for making studying
	at the TU Wien one of the best experiences in my life. 
\end{acknowledgements*}

\begin{kurzfassung}
	Wenn abstract OK ist kommt hier die uebersetzung hin.
\end{kurzfassung}

\begin{abstract}
	SPARQL Protocol and RDF Query Language (SPARQL) presents a standardized way to
	query the growing amount of Resource Description Framework (RDF) data in the
	internet.  
	With the introduction of SPARQL 1.1 the SERVICE operator was introduced. The
	SERVICE operator is used to query several databases in the internet in only
	a sinqle query. A similar feature of SPARQL 1.0 is the GRAPH operator which
	allows to query multiple local databases in only one query. Both the introduction of
	the SERVICE and the GRAPH operator pose new problems in the 
	complexity analysis of SPARQL, as the two operators have not yet been analyzed.
	Using the SERVICE operator in practice elicits difficulties which
	were solved by defining boundedness and strong boundedness. Even though
	we know this solution exists, the subtle difference between
	boundedness and strong boundedness is not yet explored.
	Because the evaluation of general SPARQL patterns is
	PSPACE-complete we restrict ourselves to well-designed SPARQL, where the
	evaluation problem is coNP-complete.
	Extending the well-designed fragment of SPARQL with the SERVICE and
	GRAPH operators yields a new SPARQL fragment
	which allows a reasonable complexity analysis as general SPARQL patterns
	would cloud the complexity of the SERVICE and GRAPH operators. 
	We will show that the evaluation problem in this fragment is
	coNP-complete. After explaining the notions of boundedness and strong
	boundedness we will unveil the difference between them. Building upon well-designed SPARQL we will
	also discuss weakly well-designed SPARQL which renders a powerful
	fragment by relaxing constraints of well-designed SPARQL.
%	SPARQL has a special 
%	toolkit fitting the needs of querying RDF data in the semantic web. This toolkit is
%	powerful and needs to be analyzed complexity wise not only because the
%	associated mathematical proofs are interesting but also to optimize query
%	evaluation and to check if the
%	tools SPARQL provides are feasible for its practical use; that is, querying RDF data.
	%\noindent
	%A fragment of SPARQL which is convenient for complexity analysis called
	%well-designed SPARQL is introduced. Well-designed SPARQL will be enhanced with the
	%GRAPH and SERVICE operators which are used to query several databases from the
	%web in only a single query. The difficulties the SERVICE operator elicits in practice 
	%are adressed and discussed. 
	
%	\noindent Sometimes well-designed SPARQL is too
%	restrictive for practical use, and can be extended to weakly well-designed
%	SPARQL without aggravating the complexity of well-designed SPARQL. 
%	By relaxing constraints of well-designed SPARQL, weakly well-designed SPARQL 
%	renders a powerful fragment of SPARQL which comprises nearly all of the SPARQL
%	queries used in common practical setups.
\end{abstract}

% Select the language of the thesis, e.g., english or naustrian.
\selectlanguage{english}

% Add a table of contents (toc).
\tableofcontents % Starred version, i.e., \tableofcontents*, removes the self-entry.

% Switch to arabic numbering and start the enumeration of chapters in the table of content.
\mainmatter

\chapter{Introduction}
\input{introduction.tex}

\chapter{Preliminaries}
\input{definitions.tex}

\chapter{Well-Designed SPARQL}
\input{pods2014containment.tex}

\chapter{Complexity of well-designed SPARQL with GRAPH and SERVICE}
\input{serviceproof.tex}

\chapter{The SERVICE-operator in Practice}\label{chapter:serviceeval}
\input{builaranda.tex}

\chapter{Beyond well-designed SPARQL}
\input{beyondwelldesigned.tex}

\chapter{Conclusion}
We introduced the syntax and semantics of SPARQL and RDF inspired
by~\cite{pichler2014containment,perez2009semantics,BuilAranda20131} and discussed
the semantics of the SERVICE and GRAPH operator which we found
in~\cite{BuilAranda20131}. In Chapter 3 we introduced well-designed SPARQL which
is the basis for our the complexity analysis throughout the paper. Also in Chapter 3, we summarized the fine-grained complexity analysis
Pichler and Skritek did in~\cite{pichler2014containment}. Further we analysed the
complexity of the evaluation problem of well-designed  SPARQL with the GRAPH and
SERVICE operator. Chapter 5 explains the difficulties the SERVICE operator can elicit in
practice and we summarized the solutions brought forth
by~\cite{BuilAranda20131}. Furthermore we discussed the difference of boundedness and
strong boundedness in Section 5.2. Finally in Chapter 6 we augmented well-designed
SPARQL to weakly well-designed SPARQL which was proposed by Kaminski et
al.~\cite{kaminski_bwd}. Weakly well-designed did not only allow a more powerful
SPARQL language (e.g. top level FILTER expressions) than well-designed SPARQL but also comprises most of the SPARQL
queries encountered in practice.

\section{Future Work}
There is still work to do on the theoretical side:
Most importantly we did not do a static analysis of the well-designed fragment of SPARQL
which allows the GRAPH and SERVICE operator. The problems \textbf{CONTAINMENT},
\textbf{SUBSUMPTION} and \textbf{EQUIVALENCE} still need to be analyzed in this
fragment. One could use our translation described in Section 4.1 as a foundation
for this work, even though one would likely need to modify it for this purpose.
\backmatter

% Use an optional list of figures.
\listoffigures % Starred version, i.e., \listoffigures*, removes the toc entry.

% Use an optional list of tables.
\listoftables % Starred version, i.e., \listoftables*, removes the toc entry.

% Use an optional list of alogrithms.
\listofalgorithms
\addcontentsline{toc}{chapter}{List of Algorithms}


% Add an index.
\printindex

% Add a glossary.
\printglossaries

% Add a bibliography.
\bibliographystyle{alpha}
\bibliography{intro}

\chapter{Appendix}
\input{appendix.tex}

\end{document}
